<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>å…§æ’æœå°‹ Interpolation search - Rust Algorithm Club</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Learn algorithms and data structures with Rust">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            tex2jax: {
              inlineMath: [['$','$']],
            },
          });
        </script>
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_SVG"></script>
        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "../../";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="../../index.html">Rust Algorithm Club</a></li><li class="spacer"></li><li><a href="../../concepts/index.html">åŸºç¤æ¦‚å¿µ</a></li><li><ol class="section"><li><a href="../../concepts/asymptotic-notation/index.html">æ¼¸é€²ç¬¦è™Ÿ Asymptotic Notation</a></li></ol></li><li><a href="../../searching/index.html">æœå°‹</a></li><li><ol class="section"><li><a href="../../searching/linear_search/index.html">ç·šæ€§æœå°‹ Linear search</a></li><li><a href="../../searching/binary_search/index.html">äºŒå…ƒæœå°‹ Binary search</a></li><li><a href="../../searching/interpolation_search/index.html" class="active">å…§æ’æœå°‹ Interpolation search</a></li><li><a href="../../searching/exponential_search/index.html">æŒ‡æ•¸æœå°‹ Exponential search</a></li></ol></li><li><a href="../../sorting/index.html">æ’åº</a></li><li><ol class="section"><li><a href="../../sorting/simple-sorts.html">ç°¡å–®æ’åº</a></li><li><ol class="section"><li><a href="../../sorting/insertion_sort/index.html">æ’å…¥æ’åº Insertion sort</a></li><li><a href="../../sorting/selection_sort/index.html">é¸æ“‡æ’åº Selection sort</a></li><li><a href="../../sorting/bubble_sort/index.html">æ°£æ³¡æ’åº Bubble sort</a></li><li><a href="../../sorting/shellsort/index.html">å¸Œçˆ¾æ’åº Shellsort</a></li></ol></li><li><a href="../../sorting/efficient-sorts.html">é«˜æ•ˆæ’åº</a></li><li><ol class="section"><li><a href="../../sorting/heapsort/index.html">å †ç©æ’åº Heapsort</a></li><li><a href="../../sorting/quicksort/index.html">å¿«é€Ÿæ’åº Quicksort</a></li><li><a href="../../sorting/mergesort/index.html">åˆä½µæ’åº Mergesort</a></li></ol></li><li><a href="../../sorting/hybrid-sorts.html">æ··åˆæ’åº</a></li><li><ol class="section"><li><a href="../../sorting/introsort/index.html">ğŸš§ å…§çœæ’åº Introsort</a></li><li><a href="../../sorting/timsort/index.html">ğŸš§ è‡ªé©æ‡‰åˆä½µæ’åº Timsort</a></li><li><a href="../../sorting/pdqsort/index.html">ğŸš§ æ¨¡å¼æ¶ˆé™¤å¿«é€Ÿæ’åº Pdqsort</a></li></ol></li><li><a href="../../sorting/special-purpose-sorts.html">ç‰¹æ®Šæ’åº</a></li><li><ol class="section"><li><a href="../../sorting/counting_sort/index.html">è¨ˆæ•¸æ’åº Counting sort</a></li><li><a href="../../sorting/bucket_sort/index.html">æ¡¶æ’åº Bucket sort</a></li><li><a href="../../sorting/radix_sort/index.html">åŸºæ•¸æ’åº Radix sort</a></li></ol></li></ol></li><li><a href="../../collections/index.html">è³‡æ–™çµæ§‹</a></li><li><ol class="section"><li><a href="../../collections/stack-queue.html">å †ç–Šèˆ‡ä½‡åˆ—</a></li><li><ol class="section"><li><a href="../../collections/stack/index.html">ğŸš§ å †ç–Š Stack</a></li><li><a href="../../collections/queue/index.html">ğŸš§ ä½‡åˆ— Queue</a></li><li><a href="../../collections/deque/index.html">ğŸš§ é›™ç«¯ä½‡åˆ— Deque</a></li></ol></li><li><a href="../../collections/linked_list/index.html">éˆçµä¸²åˆ—</a></li><li><ol class="section"><li><a href="../../collections/singly_linked_list/index.html">å–®å‘éˆçµä¸²åˆ— Singly linked list</a></li><li><a href="../../collections/doubly_linked_list/index.html">ğŸš§ é›™å‘éˆçµä¸²åˆ— Doubly linked list</a></li><li><a href="../../collections/circular_linked_list/index.html">ğŸš§ å¾ªç’°éˆçµä¸²åˆ— Circular linked list</a></li></ol></li><li><a href="../../collections/associative-container/index.html">é—œè¯å®¹å™¨</a></li><li><ol class="section"><li><a href="../../collections/hash_map/index.html">é›œæ¹Šè¡¨ Hash map</a></li><li><a href="../../collections/ordered_map/index.html">ğŸš§ æœ‰åºæ˜ å°„è¡¨ Ordered map</a></li><li><a href="../../collections/multimap/index.html">ğŸš§ å¤šé‡æ˜ å°„è¡¨ Multimap</a></li><li><a href="../../collections/set/index.html">é›†åˆ Set</a></li><li class="spacer"></li></ol></li></ol></li><li><a href="../../CONTRIBUTING.html">è²¢ç»æŒ‡å—</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Rust Algorithm Club</h1>

                        <div class="right-buttons">
                            <a href="https://github.com/weihanglo/rust-algorithm-club" title="Edit" aria-label="Edit on GitHub">
                                <i id="print-button" class="fa fa-github"> Edit</i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#aå…§æ’æœå°‹-interpolation-search" id="aå…§æ’æœå°‹-interpolation-search"><h1>å…§æ’æœå°‹ Interpolation Search</h1></a>
<p>å…§æ’æœå°‹ Interpolation search ç‚º<a href="../binary_search">äºŒå…ƒæœå°‹</a>çš„è®Šç¨®ï¼Œå·®åˆ¥åœ¨æ–¼äºŒåˆ†é»çš„é¸æ“‡æ–¹æ³•ï¼ŒäºŒå…ƒæœå°‹é¸æ“‡ä¸­é–“çš„å…ƒç´ ä½œç‚ºäºŒåˆ†é»ï¼Œè€Œå…§æ’æœå°‹å‰‡åå‰¯å…¶å¯¦ï¼Œä»¥å…§æ’æ³•æ‰¾å°‹äºŒåˆ†é»ã€‚å…§æ’æ³•æœ‰è¨±å¤šç¨®é¡ï¼Œæœ¬æ¬¡æœå°‹æ¼”ç®—æ³•é¸æ“‡ä½¿ç”¨å¸¸è¦‹çš„<a href="https://en.wikipedia.org/wiki/Linear_interpolation">ç·šæ€§å…§æ’ï¼ˆlinear interpolationï¼‰</a>å¯¦ä½œã€‚</p>
<p>å…§æ’æœå°‹çš„ç‰¹è‰²å¦‚ä¸‹ï¼š</p>
<ul>
<li>è³‡æ–™éœ€è¦æ˜¯å¯è¨ˆç®—<a href="https://en.wikipedia.org/wiki/Interpolation">å…§æ’ï¼ˆinterpolationï¼‰</a>çš„æ•¸å€¼è³‡æ–™ã€‚</li>
<li>å°è³‡æ–™åˆ†ä½ˆæ•æ„Ÿï¼Œè³‡æ–™å‡å‹»åˆ†ä½ˆæ™‚ï¼Œæ•ˆèƒ½å‹éäºŒå…ƒæœå°‹ã€‚</li>
<li>è³‡æ–™åˆ†ä½ˆä¸å‡å‹»æ™‚ï¼Œæœ€å·®è¤‡é›œåº¦é«˜é” $O(n)$ã€‚</li>
</ul>
<a class="header" href="#aæ­¥é©Ÿ" id="aæ­¥é©Ÿ"><h2>æ­¥é©Ÿ</h2></a>
<ol>
<li>ç¢ºèªè³‡æ–™å·²ç¶“æ’å¥½åºã€‚</li>
<li>åˆ©ç”¨ç¬¬ä¸€å€‹å…ƒç´  a èˆ‡æœ€å¾Œçš„å…ƒç´  bï¼Œä»¥åŠæœå°‹ä¸Šä¸‹ç•Œ hi èˆ‡ lo ä½ç½®ï¼Œä½œç‚ºå…©å€‹ç«¯é»ã€‚</li>
<li>åˆ©ç”¨ä¸Šè¿°å…©é» (lo, a) èˆ‡ (hi, b)ï¼Œå°æœå°‹ç›®æ¨™è¨ˆç®—å…§æ’ï¼Œå¾—åˆ°å¯èƒ½çš„ä½ç½®ã€‚
<ol>
<li>è‹¥è©²ä½ç½®ä¸Šå…ƒç´ è¼ƒå°ï¼Œå‰‡ä»¤å…¶ç‚ºæ–°æœå°‹ä¸‹ç•Œ aâ€™ï¼Œé‡è¤‡æ­¥é©ŸäºŒåˆ°ä¸‰ï¼Œç¹¼çºŒæ±‚å…§æ’ã€‚</li>
<li>è‹¥è©²ä½ç½®ä¸Šå…ƒç´ è¼ƒå¤§ï¼Œå‰‡ä»¤å…¶ç‚ºæ–°æœå°‹ä¸Šç•Œ bâ€™ï¼Œé‡è¤‡æ­¥é©ŸäºŒåˆ°ä¸‰ï¼Œç¹¼çºŒæ±‚å…§æ’ã€‚</li>
<li>è‹¥ç›¸ç­‰ï¼Œå‰‡å®Œæˆæœå°‹ã€‚</li>
</ol>
</li>
<li>æœå°‹åœæ­¢åœ¨ aâ€™ã€bâ€™ å…©å…ƒç´ æœå°‹ä½ç½®é‡ç–Šï¼Œä»¥åŠç›®æ¨™å€¼æ¯”ä¸‹ç•Œ aâ€™ å°æˆ–æ¯”ä¸Šç•Œ bâ€™ å¤§ã€‚</li>
</ol>
<a class="header" href="#aèªªæ˜" id="aèªªæ˜"><h2>èªªæ˜</h2></a>
<p>è¿…é€Ÿèªªæ˜ç·šæ€§å…§æ’æ³•ã€‚ç·šæ€§å…§æ’æ³•æ˜¯ä¸­å­¸å¿…ä¿®çš„æ•¸å­¸æ¦‚å¿µï¼Œçµ¦å®šå…©é» $(x_0,y_0)$ èˆ‡ $(x_1,y_1)$ï¼Œæ¬²æ±‚åœ¨ $[x_0,x_1]$ å€é–“å…§ç›´ç·šä¸Š $xâ€™$ é»çš„ y å€¼ï¼Œå¯ä»¥é€éæ–œç‡å…¬å¼æ±‚è§£ï¼š</p>
<p>$$
\frac{y - y_0}{xâ€™ - x_0} = \frac{y_1 - y_0}{x_1 - x_0 }
$$</p>
<p>æ¥ä¸‹ä¾†å°±æ˜¯å°å­¸è§£æ–¹ç¨‹å¼çš„äº‹å…’äº†ã€‚</p>
<div style="text-align: center">
<img style="width: 400px" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Linear_interpolation_visualisation.svg/512px-Linear_interpolation_visualisation.svg.png" />
<p><i>Cmglee - CC BY-SA 3.0</i></p>
</div>
<p>å›åˆ°æ­£é¡Œï¼Œä»¥ä¸‹ç”¨æ–‡å­—è§£é‡‹å…§æ’æœå°‹ã€‚</p>
<p>é€™è£¡æœ‰ä¸€å€‹å·²æ’åºæœ‰ 14 å€‹å…ƒç´ çš„åºåˆ—ï¼Œæˆ‘å€‘éœ€è¦å¾ä¸­æ‰¾å‡º <strong>27</strong>ã€‚</p>
<pre><code>[1, 9, 10, 15, 17, 17, 18, 23, 27, 28, 29, 30, 31, 34]
</code></pre>
<p>æˆ‘å€‘å°‡åºåˆ—ç´¢å¼•ç•¶ä½œ x è»¸ï¼Œå…ƒç´ å€¼ä½œç‚º y è»¸ã€‚å¯å¾—å·²çŸ¥å…©é»ç‚º $(0, 1)$ åŠ $(13, 34)$ã€‚</p>
<p>é¦–å…ˆï¼Œé€éæ–œç‡å…¬å¼ï¼Œè¨ˆç®—å‡ºåœ¨ $y = 27$ æ™‚ï¼Œ$xâ€™$ï¼Œä¹Ÿå°±æ˜¯ 27 åœ¨åºåˆ—ä¸­å¯èƒ½çš„ä½ç½®ç‚º</p>
<p>$$xâ€™ = \lfloor 27 / (34 - 1) \cdot (13 - 0) \rfloor = 10$$</p>
<p>æŸ¥çœ‹ <code>arr[10]</code> ç‚º 29ï¼Œæ¯”æœå°‹ç›®æ¨™ 27 ä¾†å¾—å¤§ã€‚å°‡ 29 ç•¶ä½œæˆ‘å€‘æ–°çš„ä¸Šç•Œï¼Œæœå°‹ç¯„è®Šæˆç¬¬ [0, 9] å€‹å…ƒç´ ï¼ˆ29 ä¸éœ€åˆ—å…¥æœå°‹ï¼‰ï¼Œç¹¼çºŒè¨ˆç®—å…§æ’</p>
<p>$$xâ€™ = \lfloor 27 / (28 - 1) \cdot (9 - 0) \rfloor = 9$$</p>
<p>æŸ¥çœ‹ <code>arr[9]</code> ç‚º 28ï¼Œæ¯”æœå°‹ç›®æ¨™ 27 ä¾†å¾—å¤§ã€‚å°‡ 28 ç•¶ä½œæˆ‘å€‘æ–°çš„ä¸Šç•Œï¼Œæœå°‹ç¯„è®Šæˆç¬¬ [0, 8] å€‹å…ƒç´ ï¼ˆ28 ä¸éœ€åˆ—å…¥æœå°‹ï¼‰ï¼Œç¹¼çºŒè¨ˆç®—å…§æ’</p>
<p>$$xâ€™ = \lfloor 27 / (27 - 1) \cdot (8 - 0) \rfloor = 8$$</p>
<p>æŸ¥çœ‹ <code>arr[8]</code> ç‚º 27ï¼Œæ°æ°æ˜¯æœå°‹ç›®æ¨™ 27ï¼Œæœå°‹åˆ°æ­¤çµæŸã€‚</p>
<a class="header" href="#aæ•ˆèƒ½" id="aæ•ˆèƒ½"><h2>æ•ˆèƒ½</h2></a>
<table><thead><tr><th>              </th><th> Complexity </th></tr></thead><tbody>
<tr><td> Worst        </td><td> $O(n)$     </td></tr>
<tr><td> Best         </td><td> $O(1)$     </td></tr>
<tr><td> Average      </td><td> $O(n)$     </td></tr>
<tr><td> Average      </td><td> $O(\log \log n)$ on uniform distributed data </td></tr>
<tr><td> Worst space  </td><td> $O(1)$      </td></tr>
</tbody></table>
<blockquote>
<p>$n$ï¼šè³‡æ–™ç­†æ•¸</p>
</blockquote>
<p>ç·šæ€§å…§å·®æœå°‹çš„æœ€å·®æ™‚é–“è¤‡é›œåº¦ç‚º $O(n)$ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å…§å·®çš„çµæœéƒ½è½åœ¨é‚Šç•Œæ—ï¼Œæœå°‹ç¯„åœåªç¸®å°ä¸€å€‹å…ƒç´ ã€‚é€™ç¨®æƒ…æ³å®¹æ˜“ç™¼ç”Ÿåœ¨è³‡æ–™ä¾æ’åºå‘ˆæŒ‡æ•¸æˆ–å°æ•¸ç­‰éç·šæ€§å‡½æ•¸ã€‚ä¾‹å¦‚ $y = 2^x$ã€‚</p>
<p>ç·šæ€§å…§æ’æœå°‹å°è³‡æ–™çš„æœŸæœ›æ˜¯å‡å‹»æ©Ÿç‡åˆ†ä½ˆï¼ˆuniform probability distributionï¼‰ã€‚æƒ³æ±‚å¹³å‡æ™‚é–“è¤‡é›œåº¦ $O(\log \log n)$ ï¼Œé ˆå…ˆé€éæ©Ÿç‡å¯†åº¦å‡½æ•¸ï¼Œè¨ˆç®—æ¢ä»¶æ©Ÿç‡ï¼Œä¸€æ­¥æ­¥ç¸®å°ç¯„åœï¼Œæ±‚å¾—å¹³å‡èª¤å·®ï¼Œæœ€å¾Œæ±‚å¾—æœŸæœ›å€¼ã€‚é€™éƒ¨åˆ†è¨ˆç®—è¼ƒç‚ºè¤‡é›œï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥åƒè€ƒé–±è®€è³‡æ–™ã€Œ<a href="http://www.cs.technion.ac.il/%7Eitai/publications/Algorithms/p550-perl.pdf">Perl, Y., Itai, A., &amp; Avni, H. (1978). Interpolation searchâ€”a log log N search.</a>ã€ã€‚</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/Uniform_Distribution_PDF_SVG.svg/320px-Uniform_Distribution_PDF_SVG.svg.png" alt="" /></p>
<p><em>PDF of uniform distribution by IkamusumeFan - CC BY-SA 3.0</em></p>
<a class="header" href="#aå¯¦ä½œ" id="aå¯¦ä½œ"><h2>å¯¦ä½œ</h2></a>
<p>å…§æ’æœå°‹çš„å¯¦ä½œå…±åˆ†ç‚ºå¹¾éƒ¨åˆ†ï¼š</p>
<ol>
<li>è™•ç†ç©ºåºåˆ—ç‹€æ³ã€‚</li>
<li>å»ºç«‹è¿´åœˆè¿­ä»£å…±ç”¨çš„è®Šæ•¸ã€‚</li>
<li>è¨ˆç®—ç·šæ€§æ’å€¼çš„ä¸»è¦è¿´åœˆã€‚</li>
<li>å°‡å…§æ’å€¼æ˜ å°„åˆ°çµæœçš„ <code>Result</code>ã€‚</li>
</ol>
<p>é¦–å…ˆæ˜¯å‡½å¼å®£å‘Šã€‚</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
pub fn interpolation_search(
    arr: &amp;[i32],
    target: &amp;i32,
) -&gt; Result&lt;usize, usize&gt;
#}</code></pre></pre>
<p>æ˜ å…¥çœ¼ç°¾çš„æ˜¯ <code>i32</code>ï¼Œè€Œéæ³›å‹åƒæ•¸ï¼Œç‚ºä»€éº¼å‘¢ï¼Ÿæ˜¯å› ç‚ºå…§æ’æœå°‹ç‚ºäº†è¨ˆç®—ç·šæ€§å…§æ’ï¼Œè³‡æ–™åƒ…é™å®šåœ¨ã€Œæ•¸å€¼è³‡æ–™ã€ï¼Œè€Œ Rust ä¸¦æ²’æœ‰ç‰¹åˆ¥ä¸€é¡ <strong>Numeric</strong> çš„å‹åˆ¥ï¼Œè‡ªå·±é€é trait å¯¦ä½œåˆç•°å¸¸ç¹ç‘£ï¼Œå› æ­¤å…ˆä»¥ <code>i32</code> ä»£æ›¿ã€‚è€Œå›å‚³å€¼çš„éƒ¨åˆ†ï¼Œèˆ‡æŒ‡æ•¸æœå°‹ï¼äºŒå…ƒæœå°‹ä¸€æ¨¡ä¸€æ¨£ï¼Œå›å‚³çš„ <code>Result</code></p>
<ul>
<li>è‹¥ç‚º <code>Ok</code>ï¼Œå…¶å€¼ä»£è¡¨ç›®æ¨™å€¼åœ¨åºåˆ—å…§çš„ç´¢å¼•ä½ç½®ï¼›</li>
<li>è‹¥ç‚º <code>Err</code>ï¼Œå‰‡æ˜¯å¯ä»¥å°‡ç›®æ¨™å€¼æ’å…¥åºåˆ—å…§åˆä¸æœƒç ´å£æ’åºçš„ä½ç½®ã€‚</li>
</ul>
<blockquote>
<p>å»¶çºŒæ•¸å€¼å‹åˆ¥çš„è©±é¡Œï¼ŒRust ç¤¾ç¾¤æä¾› <a href="https://github.com/rust-num/num">num</a> crateï¼Œå®šç¾©äº†å„ç¨®æ•¸å€¼å‹åˆ¥èˆ‡ traitï¼Œå¤§æ•´æ•¸ã€è¤‡æ•¸ã€è™›æ•¸ã€æœ‰ç†æ•¸éƒ½å›Šæ‹¬å…¶ä¸­ï¼Œéå¸¸æœ‰è¶£ã€‚</p>
</blockquote>
<p>å†ä¾†å°±æ˜¯ç¬¬ä¸€ç¬¬äºŒéƒ¨åˆ†ï¼Œè™•ç†ç©ºåºåˆ—èˆ‡å»ºç«‹å…±ç”¨è®Šæ•¸ï¼Œéå¸¸ç›´è§€ã€‚</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
    if arr.is_empty() {
        return Err(0)
    }

    let mut hi = arr.len() - 1;
    let mut lo = 0_usize;

    let mut interpolant = 0_usize;
#}</code></pre></pre>
<ul>
<li><code>hi</code>ã€<code>lo</code> å…©å€‹è®Šæ•¸åŠƒå®šçš„æœå°‹ç¯„åœä¸Šä¸‹ç•Œã€‚</li>
<li><code>interpolant</code> å„²å­˜ç·šæ€§æ’å€¼ï¼Œä»£è¡¨æ¯æ¬¡è¿­ä»£çš„æœå°‹ä½ç½®ã€‚</li>
</ul>
<p>æ¥ä¸‹ä¾†å°±æ˜¯ä¸»è¦çš„è¿´åœˆï¼Œè² è²¬è¿­ä»£è¨ˆç®—å…§æ’å€¼ã€‚åˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼Œç›´æ¥çœ‹ç¨‹å¼ç¢¼å…ˆã€‚</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
    loop {
        let lo_val = arr[lo];
        let hi_val = arr[hi];

        // 1.
        if hi &lt;= lo || *target &lt; lo_val || *target &gt; hi_val {
            break
        }

        // 2. The linear interpolation part
        let offset = (*target - lo_val) * (hi - lo) as i32 / (hi_val - lo_val);
        interpolant = lo + offset as usize;

        let mid_val = arr[interpolant];

        // 3.
        if mid_val &gt; *target {
            hi = interpolant - 1;
        } else if mid_val &lt; *target {
            lo = interpolant + 1;
        } else {
            break
        }
    }
#}</code></pre></pre>
<ol>
<li>è¿´åœˆçš„ä¸‰å€‹çµ‚æ­¢æ¢ä»¶ï¼Œåˆ†åˆ¥ç‚ºï¼š
<ul>
<li><code>hi</code>ã€<code>lo</code> å…©å€‹è®Šæ•¸åŠƒå®šçš„æœå°‹ç¯„åœé‡ç–Šï¼Œé•·åº¦ç‚ºé›¶ã€‚</li>
<li>æœå°‹ç›®æ¨™å€¼æ¯”ä¸Šç•Œé‚„å¤§ã€‚</li>
<li>æœå°‹ç›®æ¨™å€¼æ¯”ä¸‹ç•Œé‚„å°ã€‚</li>
</ul>
</li>
<li>ç·šæ€§å…§æ’çš„è¨ˆç®—æ–¹ç¨‹å¼ï¼Œè¦æ³¨æ„æˆ‘å€‘æ˜¯å¯« Rust ä¸æ˜¯ JavaScriptï¼Œ<code>i32</code> èˆ‡ <code>usize</code> ä¸èƒ½æ··ç”¨ï¼Œè¦æ‰‹å‹•è½‰å‹ã€‚</li>
<li>æ¯”è¼ƒæ’å€¼èˆ‡ç›®æ¨™å€¼ã€‚ç›¸ç­‰å‰‡è·³å‡ºè¿´åœˆï¼›è‹¥ç›®æ¨™å¤§æ–¼å°æ–¼æ’å€¼ï¼Œå‰‡ç¸®å°æœå°‹ç¯„åœã€‚æ³¨æ„ï¼Œç¯„åœéœ€æ‰‹å‹•åŠ æ¸›ä¸€ï¼Œæ’é™¤ä¸Šä¸‹ç•Œï¼Œä»¥å…ç„¡é™è¿´åœˆç”¢ç”Ÿã€‚</li>
</ol>
<p>æœ€å¾Œä¸€éƒ¨åˆ†å‰‡æ˜¯æ±ºå®šç·šæ€§æ’å€¼æ‰€å¾—çš„ç´¢å¼•ä½ç½®æ˜¯å¦ç‚ºç›®æ¨™å€¼ï¼Œä¸¦å°‡è©²å€¼æ˜ å°„åˆ° <code>Result</code> ä¸Šã€‚</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
    if *target &gt; arr[hi] {
        Err(hi + 1)
    } else if *target &lt; arr[lo] {
        Err(lo)
    } else {
        Ok(interpolant)
    }
#}</code></pre></pre>
<p>å®Œæ•´çš„ç¨‹å¼ç¢¼å¦‚ä¸‹ã€‚</p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
pub fn interpolation_search(
    arr: &amp;[i32],
    target: &amp;i32,
) -&gt; Result&lt;usize, usize&gt; {
    // 1. Handle empty sequence.
    if arr.is_empty() {
        return Err(0)
    }

    // 2. Setup variable storing iteration informaion.
    let mut hi = arr.len() - 1;
    let mut lo = 0_usize;

    let mut interpolant = 0_usize;

    // 3. Main loop to calculate the interpolant.
    loop {
        let lo_val = arr[lo];
        let hi_val = arr[hi];

        // 3.1. Three condition to exit the loop
        if hi &lt;= lo || *target &lt; lo_val || *target &gt; hi_val {
            break
        }

        // 3.2. The linear interpolation part
        let offset = (*target - lo_val) * (hi - lo) as i32 / (hi_val - lo_val);
        interpolant = lo + offset as usize;

        let mid_val = arr[interpolant];

        // 3.3. Comparison between the interpolant and targert value.
        if mid_val &gt; *target {
            hi = interpolant - 1;
        } else if mid_val &lt; *target {
            lo = interpolant + 1;
        } else {
            break
        }
    }

    // 4. Determine whether the returning interpolant are equal to target value.
    if *target &gt; arr[hi] {
        Err(hi + 1)
    } else if *target &lt; arr[lo] {
        Err(lo)
    } else {
        Ok(interpolant)
    }
}
#}</code></pre></pre>
<blockquote>
<p>å¦‚åŒ<a href="../binary_search">äºŒå…ƒæœå°‹</a>èˆ‡<a href="../exponential_search">æŒ‡æ•¸æœå°‹</a>ï¼Œæœªç‰¹åˆ¥è™•ç†é‡è¤‡å…ƒç´ çš„å…§æ’æœå°‹ï¼Œä¸¦ç„¡æ³•é æœŸæœƒé¸æ“‡å“ªä¸€å€‹å…ƒç´ ã€‚</p>
</blockquote>
<a class="header" href="#aè®Šå½¢èˆ‡è¡ç”Ÿ" id="aè®Šå½¢èˆ‡è¡ç”Ÿ"><h2>è®Šå½¢èˆ‡è¡ç”Ÿ</h2></a>
<a class="header" href="#interpolation-search-tree" id="interpolation-search-tree"><h3>Interpolation Search Tree</h3></a>
<p>Interpolation search treeï¼ˆISTï¼‰ï¼Œå§‘ä¸”ç¨±å®ƒã€Œå…§æ’æœå°‹æ¨¹ã€ï¼Œæ˜¯ä¸€å€‹å°‡å…§æ’æœå°‹çµåˆæ¨¹çš„è³‡æ–™çµæ§‹ã€‚å¦‚ä¸Šè¿°æåŠï¼Œå…§æ’æœå°‹é”åˆ° $O(\log \log n)$ çš„æœå°‹æ™‚é–“ï¼Œä½†åƒ…é©ç”¨æ–¼å‡å‹»æ©Ÿç‡åˆ†ä½ˆçš„è³‡æ–™ã€‚è€Œ IST åˆ©ç”¨å‹•æ…‹å…§æ’æœå°‹ï¼Œè®“ 1ï¼‰å…§æ’æœå°‹æ¨¹çš„æœå°‹å¯ä»¥ä½¿ç”¨åœ¨æ›´å¤šå…ƒçš„<strong>è¦å¾‹æ©Ÿç‡åˆ†ä½ˆ</strong>çš„è³‡æ–™ä¸­ï¼Œä¸” 2ï¼‰å¯ä»¥é”åˆ°ä»¥ä¸‹çš„åŸ·è¡Œæ•ˆèƒ½ï¼š</p>
<ul>
<li>$O(n)$ ç©ºé–“è¤‡é›œåº¦ã€‚</li>
<li>é æœŸæœ‰ $O(\log \log n)$ çš„å¹³æ”¤å¢æ¸›ç¯€é»æ“ä½œæ™‚é–“ï¼Œæœ€å·®æœ‰ $(O \log n)$ã€‚</li>
<li>åœ¨è¦å¾‹åˆ†ä½ˆçš„è³‡æ–™ä¸­ï¼Œé æœŸæœå°‹æ™‚é–“ç‚º $O(\log \log n)$ï¼Œæœ€å·®æ™‚é–“è¤‡é›œåº¦å‰‡ç‚º $O((\log n)^2)$</li>
<li>ç·šæ€§æ™‚é–“çš„å¾ªåºå­˜å–ï¼Œè€Œå–å¾—å‰å¾Œç¯€é»æˆ–æœ€å°å€¼éƒ½æ˜¯å¸¸æ•¸æ™‚é–“ã€‚</li>
</ul>
<p>æ›´å¤šè©³ç´°è­‰æ˜å¯ä»¥é–±è®€åƒè€ƒè³‡æ–™ã€Œ<a href="https://people.mpi-inf.mpg.de/%7Emehlhorn/ftp/DynamicInterpolationSearch.pdf">Andersson, A. (1996, October). Faster deterministic sorting and searching in linear space</a>ã€ã€‚</p>
<a class="header" href="#aåƒè€ƒè³‡æ–™" id="aåƒè€ƒè³‡æ–™"><h2>åƒè€ƒè³‡æ–™</h2></a>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Interpolation_search">Wiki: Interpolation search</a></li>
<li><a href="http://www.cs.technion.ac.il/%7Eitai/publications/Algorithms/p550-perl.pdf">Perl, Y., Itai, A., &amp; Avni, H. (1978). Interpolation searchâ€”a log log N search. Communications of the ACM, 21(7), 550-553.</a></li>
<li><a href="https://people.mpi-inf.mpg.de/%7Emehlhorn/ftp/DynamicInterpolationSearch.pdf">Andersson, A. (1996, October). Faster deterministic sorting and searching in linear space. In Foundations of Computer Science, 1996. Proceedings., 37th Annual Symposium on (pp. 135-141). IEEE.</a></li>
<li>Linear interpolation visualisation SVG By Cmglee <a href="https://creativecommons.org/licenses/by-sa/3.0">CC BY-SA 3.0</a>, via Wikimedia Commons.</li>
<li>Probability density function of uniform distribution SVG By IkamusumeFan <a href="https://creativecommons.org/licenses/by-sa/3.0">CC BY-SA 3.0</a>, via Wikimedia Commons.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../searching/binary_search/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../searching/exponential_search/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../../searching/binary_search/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../../searching/exponential_search/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
