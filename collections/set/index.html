<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>é›†åˆ Set - Rust Algorithm Club</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Learn algorithms and data structures with Rust">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Rust Algorithm Club</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ’¡ åŸºç¤æ¦‚å¿µ</li><li class="chapter-item expanded "><a href="../../concepts/asymptotic-notation/index.html">æ¼¸é€²ç¬¦è™Ÿ Asymptotic Notation</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ” æœå°‹</li><li class="chapter-item expanded "><a href="../../searching/linear_search/index.html">ç·šæ€§æœå°‹ Linear search</a></li><li class="chapter-item expanded "><a href="../../searching/binary_search/index.html">äºŒå…ƒæœå°‹ Binary search</a></li><li class="chapter-item expanded "><a href="../../searching/interpolation_search/index.html">å…§æ’æœå°‹ Interpolation search</a></li><li class="chapter-item expanded "><a href="../../searching/exponential_search/index.html">æŒ‡æ•¸æœå°‹ Exponential search</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ“š æ’åº</li><li class="chapter-item expanded affix "><li class="part-title">ç°¡å–®æ’åº</li><li class="chapter-item expanded "><a href="../../sorting/insertion_sort/index.html">æ’å…¥æ’åº Insertion sort</a></li><li class="chapter-item expanded "><a href="../../sorting/selection_sort/index.html">é¸æ“‡æ’åº Selection sort</a></li><li class="chapter-item expanded "><a href="../../sorting/bubble_sort/index.html">æ°£æ³¡æ’åº Bubble sort</a></li><li class="chapter-item expanded "><a href="../../sorting/shellsort/index.html">å¸Œçˆ¾æ’åº Shellsort</a></li><li class="chapter-item expanded affix "><li class="part-title">é«˜æ•ˆæ’åº</li><li class="chapter-item expanded "><a href="../../sorting/heapsort/index.html">å †ç©æ’åº Heapsort</a></li><li class="chapter-item expanded "><a href="../../sorting/quicksort/index.html">å¿«é€Ÿæ’åº Quicksort</a></li><li class="chapter-item expanded "><a href="../../sorting/mergesort/index.html">åˆä½µæ’åº Mergesort</a></li><li class="chapter-item expanded affix "><li class="part-title">æ··åˆæ’åº</li><li class="chapter-item expanded "><div>ğŸš§ å…§çœæ’åº Introsort</div></li><li class="chapter-item expanded "><div>ğŸš§ è‡ªé©æ‡‰åˆä½µæ’åº Timsort</div></li><li class="chapter-item expanded "><div>ğŸš§ æ¨¡å¼æ¶ˆé™¤å¿«é€Ÿæ’åº Pdqsort</div></li><li class="chapter-item expanded affix "><li class="part-title">ç‰¹æ®Šæ’åº</li><li class="chapter-item expanded "><a href="../../sorting/counting_sort/index.html">è¨ˆæ•¸æ’åº Counting sort</a></li><li class="chapter-item expanded "><a href="../../sorting/bucket_sort/index.html">æ¡¶æ’åº Bucket sort</a></li><li class="chapter-item expanded "><a href="../../sorting/radix_sort/index.html">åŸºæ•¸æ’åº Radix sort</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ  è³‡æ–™çµæ§‹</li><li class="chapter-item expanded affix "><li class="part-title">å †ç–Šèˆ‡ä½‡åˆ—</li><li class="chapter-item expanded "><a href="../../collections/stack/index.html">å †ç–Š Stack</a></li><li class="chapter-item expanded "><a href="../../collections/queue/index.html">ä½‡åˆ— Queue</a></li><li class="chapter-item expanded "><a href="../../deque/index.html">é›™ç«¯ä½‡åˆ— Deque</a></li><li class="chapter-item expanded affix "><li class="part-title">éˆçµä¸²åˆ—</li><li class="chapter-item expanded "><a href="../../collections/linked_list/index.html">éˆçµä¸²åˆ—æ¦‚è¿°</a></li><li class="chapter-item expanded "><a href="../../collections/singly_linked_list/index.html">å–®å‘éˆçµä¸²åˆ— Singly linked list</a></li><li class="chapter-item expanded "><div>ğŸš§ é›™å‘éˆçµä¸²åˆ— Doubly linked list</div></li><li class="chapter-item expanded "><div>ğŸš§ å¾ªç’°éˆçµä¸²åˆ— Circular linked list</div></li><li class="chapter-item expanded affix "><li class="part-title">é—œè¯å®¹å™¨</li><li class="chapter-item expanded "><a href="../../collections/associative-container/index.html">é—œè¯å®¹å™¨æ¦‚è¿°</a></li><li class="chapter-item expanded "><a href="../../collections/hash_map/index.html">é›œæ¹Šè¡¨ Hash map</a></li><li class="chapter-item expanded "><div>ğŸš§ æœ‰åºæ˜ å°„è¡¨ Ordered map</div></li><li class="chapter-item expanded "><div>ğŸš§ å¤šé‡æ˜ å°„è¡¨ Multimap</div></li><li class="chapter-item expanded "><a href="../../collections/set/index.html" class="active">é›†åˆ Set</a></li><li class="chapter-item expanded "><a href="../../collections/bloom_filter/index.html">å¸ƒéš†éæ¿¾å™¨ Bloom filter</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ§µ å­—ä¸²è™•ç†</li><li class="chapter-item expanded "><a href="../../hamming_distance/index.html">æ¼¢æ˜è·é›¢ Hamming distance</a></li><li class="chapter-item expanded "><a href="../../levenshtein_distance/index.html">èŠæ–‡æ–¯å¦è·é›¢ Levenshtein distance</a></li><li class="chapter-item expanded "><div>ğŸš§ æœ€é•·å…±åŒå­å­—ä¸² Longest common substring</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../../CONTRIBUTING.html">è²¢ç»æŒ‡å—</a></li><li class="chapter-item expanded affix "><a href="../../404.html">404</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Rust Algorithm Club</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/weihanglo/rust-algorithm-club" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#é›†åˆ-set" id="é›†åˆ-set">é›†åˆ Set</a></h1>
<p>é›†åˆæ˜¯ä¸€ç¨®æŠ½è±¡è³‡æ–™å‹åˆ¥ï¼ˆAbstract data typeï¼‰ï¼Œæ¦‚å¿µè¡ç”Ÿè‡ªæ•¸å­¸çš„<a href="https://en.wikipedia.org/wiki/Set_theory">é›†åˆè«–</a>ï¼Œå’Œé™£åˆ—é¡ä¼¼ï¼Œç‚ºä¸åŒå…ƒç´ æ‰€çµ„æˆçš„è³‡æ–™çµæ§‹ï¼Œä¸åŒåœ¨æ–¼é›†åˆæœ‰äº›é‡è¦çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>ç„¡åºæ€§ï¼šé›†åˆå…§å„å…ƒç´ ç„¡ç‰¹å®šæ’åºæˆ–æ’åºä¸é‡è¦ã€‚</li>
<li>äº’ç•°æ€§ï¼šé›†åˆå…§æ¯å€‹å…ƒç´ ä¸”åªèƒ½å‡ºç¾ä¸€æ¬¡ã€‚</li>
</ul>
<p>ä¸€èˆ¬ä¾†èªªï¼Œé›†åˆçš„å¯¦ä½œæœƒç›¡é‡è²¼è¿‘é›†åˆè«–ä¸­çš„æœ‰é™é›†åˆå®šç¾©ï¼Œæœ¬æ¬¡å¯¦ä½œåŒæ¨£éµç…§æ•¸å­¸å®šç¾©ã€‚</p>
<blockquote>
<p>æœ¬æ¬¡å¯¦ä½œçš„ç¨‹å¼ç¢¼ç½®æ–¼ <a href="/doc/rust_algorithm_club/collections/struct.HashSet.html"><code>rust_algorithm_club::collections::HashSet</code></a> API æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h2><a class="header" href="#æ¶æ§‹è¨­è¨ˆ" id="æ¶æ§‹è¨­è¨ˆ">æ¶æ§‹è¨­è¨ˆ</a></h2>
<h3><a class="header" href="#ä»¥é›œæ¹Šè¡¨ç‚ºåº•å±¤å®¹å™¨" id="ä»¥é›œæ¹Šè¡¨ç‚ºåº•å±¤å®¹å™¨">ä»¥é›œæ¹Šè¡¨ç‚ºåº•å±¤å®¹å™¨</a></h3>
<p>é›†åˆèƒ½ä»¥è¨±å¤šä¸åŒçš„è³‡æ–™çµæ§‹å¯¦ç¾ï¼Œé€šç”¨çš„é›†åˆå¯¦ä½œå¤šæœƒæœ€ä½³åŒ–å–å¾—ã€å¢åŠ ã€ç§»é™¤å…ƒç´ ç­‰é‹ç®—ï¼Œé€™è®“æˆ‘å€‘æƒ³åˆ°äº†ã€Œ<a href="../hash_map">é›œæ¹Šè¡¨</a>ã€ï¼Œé›œæ¹Šè¡¨æ­£æ˜¯èƒ½å°‡é›†åˆé‹ç®—æœ€ä½³åŒ–çš„ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œæˆ‘å€‘å°‡å€Ÿç”¨<strong>é›œæ¹Šè¡¨ä½œç‚ºåº•å±¤å„²å­˜å®¹å™¨</strong>ï¼Œé€²ä¸€æ­¥å¯¦ä½œé›†åˆã€‚</p>
<p>ä½ å¯èƒ½å¥½å¥‡ï¼Œé›†åˆæ˜æ˜åªæœ‰å…ƒç´ ï¼Œä¸¦æ²’æœ‰<strong>éµå€¼å°</strong>ï¼Œè·Ÿé›œæ¹Šè¡¨æœ‰å•¥é—œä¿‚ï¼Ÿè®“æˆ‘å€‘å›æƒ³é›œæ¹Šè¡¨ä¸€å€‹é‡è¦çš„ç‰¹æ€§ï¼šæ¯ä¸€å€‹éµï¼ˆkeyï¼‰åªæœƒå‡ºç¾ä¸€æ¬¡ï¼Œåˆ©ç”¨é›œæ¹Šè¡¨é€™å€‹ç‰¹æ€§ï¼Œå³å¯é”æˆä¸Šè¿°é›†åˆå…©å¤§ç‰¹æ€§ã€‚</p>
<p>æ—¢ç„¶é¸ç”¨é›œæ¹Šè¡¨ä½œç‚ºåº•å±¤å®¹å™¨ï¼Œé›†åˆçš„çµæ§‹é«”å°±éå¸¸ç°¡å–®äº†ï¼Œæˆ‘å€‘å¯ä»¥å°‡é›†åˆæƒ³åƒç‚ºåœ¨ HashMap è–„è–„çš„ä¸€å±¤å°è£ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct HashSet&lt;T&gt;
where
    T: Hash + Eq,
{
    hash_map: HashMap&lt;T, ()&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯é›œæ¹Šè¡¨çš„éµå€¼ï¼Œé€™è£¡ä½¿ç”¨ç©ºçš„ tuple <code>()</code>ï¼Œä¹Ÿå°±æ˜¯ä»¥ <a href="https://doc.rust-lang.org/std/primitive.unit.html">unit type</a> ä½œç‚ºé›œæ¹Šè¡¨ä¹‹å€¼ï¼Œåªè¦å°‡é›†åˆçš„å…ƒç´ ä½œç‚ºé›œæ¹Šè¡¨éµï¼Œå¿½ç•¥å°æ‡‰çš„å€¼ï¼Œå°±æ˜¯è²¨çœŸåƒ¹å¯¦çš„é›†åˆçµæ§‹ã€‚</p>
<h3><a class="header" href="#ä¸ä½”ç©ºé–“çš„-unit-type" id="ä¸ä½”ç©ºé–“çš„-unit-type">ä¸ä½”ç©ºé–“çš„ Unit Type</a></h3>
<p>é€™æ¨£å¤šå„²å­˜ä¸€å€‹ <code>()</code> æœƒä¸æœƒé€ æˆé¡å¤–çš„å„²å­˜ç©ºé–“è² æ“”ï¼Ÿäº‹å¯¦ä¸Šï¼ŒUnit type <code>()</code> åœ¨ Rust èªè¨€ä¸­æ˜¯ä¸€ç¨® <a href="https://doc.rust-lang.org/nomicon/exotic-sizes.html#zero-sized-types-zsts">Zero Sized Types (ZSTs)</a>ï¼Œåœ¨ç·¨è­¯æ™‚æœŸ Rust æœƒå°‡ ZST ç•¶ä½œä¸€ç¨®å‹åˆ¥ä¾†æ“ä½œï¼Œä½†çœŸæ­£è¼¸å‡ºçš„æ©Ÿå™¨ç¢¼ä¸­ï¼ŒZST ä¸¦ä¸æœƒä½”ç”¨ä»»ä½•é‹ç®—ç©ºé–“ã€‚<code>Set = HashMap&lt;T, ()&gt;</code> å®Œå…¨é«”ç¾äº† Rust é›¶æˆæœ¬æŠ½è±¡çš„èªè¨€ç‰¹æ€§ã€‚</p>
<h2><a class="header" href="#åŸºæœ¬æ“ä½œ" id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</a></h2>
<p>èº«ç‚ºä¸€å€‹å®¹å™¨ï¼Œé›†åˆæœ‰ä»¥ä¸‹å¹¾å€‹åŸºæœ¬æ“ä½œï¼š</p>
<ul>
<li><code>new</code>ï¼šåˆå§‹åŒ–ä¸€å€‹é›†åˆã€‚</li>
<li><code>contains</code>ï¼šæª¢æŸ¥é›†åˆå…§æœ‰ç„¡ç‰¹å®šå…ƒç´ ã€‚</li>
<li><code>is_empty</code>ï¼šæª¢æŸ¥é›†åˆå…§æ˜¯å¦æ²’æœ‰ä»»ä½•å…ƒç´ ã€‚</li>
<li><code>insert</code>ï¼šæ–°å¢ä¸€å€‹å…ƒç´ ã€‚</li>
<li><code>remove</code>ï¼šç§»é™¤ç‰¹å®šå…ƒç´ ã€‚</li>
<li><code>len</code>ï¼šæª¢æŸ¥é›†åˆå…§çš„å…ƒç´ æ•¸ç›®ã€‚</li>
<li><code>iter</code>ï¼šç”¢ç”Ÿä¸€å€‹ç–Šä»£é›†åˆå…§æ‰€æœ‰å…ƒç´ çš„ç–Šä»£å™¨ã€‚</li>
</ul>
<p>é€™äº›åŸºæœ¬æ“ä½œçš„å¯¦ä½œä¸Šï¼Œåªæ˜¯å°é›œæ¹Šè¡¨çš„ç°¡å–®å°è£ï¼Œè©³ç´°å¯¦ä½œå¯ä»¥åƒè€ƒ <a href="../hash_map">HashMap</a>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T&gt; HashSet&lt;T&gt;
where
    T: Hash + Eq,
{
    pub fn len(&amp;self) -&gt; usize {
        self.hash_map.len()
    }

    pub fn is_empty(&amp;self) -&gt; bool {
        self.hash_map.is_empty()
    }

    pub fn insert(&amp;mut self, value: T) -&gt; bool { // 1
        self.hash_map.insert(value, ()).is_none()
    }

    pub fn contains&lt;Q&gt;(&amp;self, value: &amp;Q) -&gt; bool // 2
    where
        T: Borrow&lt;Q&gt;,
        Q: Hash + Eq + ?Sized,
    {
        self.hash_map.get(value).is_some()
    }

    pub fn remove&lt;Q&gt;(&amp;mut self, value: &amp;Q) -&gt; bool // 3
    where
        T: Borrow&lt;Q&gt;,
        Q: Hash + Eq + ?Sized,
    {
        self.hash_map.remove(value).is_some()
    }

    pub fn iter(&amp;self) -&gt; impl Iterator&lt;Item = &amp;T&gt; { // 4
        self.hash_map.iter().map(|(k, _)| k)
    }
}
<span class="boring">}
</span></code></pre></pre>
<ol>
<li><code>insert</code> å°‡å…ƒç´ ç½®æ–¼ key ä¸Šï¼Œvalue å‰‡è¨­ç‚º <code>()</code>ã€‚</li>
<li><code>contains</code> åˆ©ç”¨ <code>HashMap::get</code> å›å‚³çš„ <code>Option&lt;()&gt;</code> åˆ¤æ–·æ˜¯å¦å·²æœ‰è©²çš„å…ƒç´ ã€‚</li>
<li><code>remove</code> åŒæ¨£ç›´æ¥å‘¼å« <code>HashMap::remove</code>ï¼Œä¸¦é€éå›å‚³ <code>Option&lt;()&gt;</code> åˆ¤æ–·å¯¦éš›ä¸Šæ˜¯å¦æœ‰ç§»é™¤ä»»ä½•å…ƒç´ ã€‚</li>
<li><code>iter</code> å‰‡ç›´æ¥åˆ©ç”¨ <code>HashMap::iter</code> ä¸¦æ¨æ£„ valueã€‚</li>
</ol>
<h2><a class="header" href="#é›†åˆé‹ç®—" id="é›†åˆé‹ç®—">é›†åˆé‹ç®—</a></h2>
<p>é›»è…¦ç§‘å­¸çš„é›†åˆå‹åˆ¥è¡ç”Ÿè‡ª<a href="https://en.wikipedia.org/wiki/Set_theory">é›†åˆè«–</a>ï¼Œç•¶ç„¶ä¹Ÿå¾—ç¬¦åˆ<a href="https://en.wikipedia.org/wiki/Algebra_of_sets">é›†åˆä»£æ•¸ï¼ˆset algebraï¼‰</a>çš„ç‰¹æ€§ï¼Œå’Œç®—è¡“çš„åŠ æ¸›ä¹˜é™¤ï¼Œé›†åˆä¹Ÿæœ‰è‡ªå·±çš„äºŒå…ƒé‹ç®—ï¼Œæˆ‘å€‘æœƒå¯¦ä½œä»¥ä¸‹å¹¾å€‹åŸºæœ¬æ–¹æ³•ï¼š</p>
<ul>
<li><code>intersection</code>ï¼šäº¤é›†ï¼ŒA âˆ© B å®šç¾©ç‚º A èˆ‡ B å…±æœ‰çš„å…ƒç´ ã€‚</li>
<li><code>union</code>ï¼šè¯é›†ï¼ŒA âˆª B å®šç¾©ç‚º A èˆ‡ B æ‰€æœ‰çš„å…ƒç´ ã€‚</li>
<li><code>symmetric_difference</code>ï¼šå°ç¨±å·®é›†ï¼Œå®šç¾©ç‚º A â–³ B = (A âˆª B) - (A âˆ© B)ï¼Œå°±æ˜¯åªå‡ºç¾åœ¨ A æˆ– Bï¼Œä¸æœƒåœ¨å…©é›†åˆå…§åŒæ™‚å‡ºç¾çš„å…ƒç´ ã€‚ </li>
<li><code>difference</code>ï¼šå·®é›†ï¼ŒA \ B å®šç¾©ç‚º A ä¸­æ‰€æœ‰æœªåœ¨ B ä¸­å‡ºç¾çš„å…ƒç´ ã€‚</li>
</ul>
<p><img src="https://i.imgur.com/jeLakB0.png" alt="venn digrams" /></p>
<p>æ­¤å¤–ï¼Œä¹Ÿæœƒä»‹ç´¹è¨±å¤šæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>is_disjoint</code>ï¼šå…©é›†åˆæ˜¯å¦ä¸äº¤é›†ã€‚</li>
<li><code>is_subset</code>ï¼šåŒ…å«æ–¼ âŠ†ï¼Œæ˜¯å¦ç‚ºå­é›†ã€‚</li>
<li><code>is_superset</code>ï¼šåŒ…å« âŠ‡ï¼Œæ˜¯å¦ç‚ºè¶…é›†ã€‚</li>
</ul>
<p>å“‡ï¼å¥½å¤šæ–¹æ³•è¦å¯¦ä½œã€‚é‚£å°±äº‹ä¸å®œé²ï¼</p>
<h3><a class="header" href="#å¯¦ä½œè¯é›†" id="å¯¦ä½œè¯é›†">å¯¦ä½œè¯é›†</a></h3>
<h4><a class="header" href="#ç¬¬ä¸€æ¬¡å˜—è©¦---å»ºç«‹æ–°çš„è¯é›†é›†åˆ" id="ç¬¬ä¸€æ¬¡å˜—è©¦---å»ºç«‹æ–°çš„è¯é›†é›†åˆ">ç¬¬ä¸€æ¬¡å˜—è©¦ - å»ºç«‹æ–°çš„è¯é›†é›†åˆ</a></h4>
<p>è¦å–å¾—å…©å€‹é›†åˆçš„è¯é›†ï¼Œæœ€ç›´è¦ºçš„æƒ³æ³•å¯èƒ½æ˜¯å‰µé€ ä¸€å€‹æ–°çš„é›†åˆï¼Œå†æŠŠ A å’Œ B å…©å€‹é›†åˆçš„å…ƒç´ é€šé€š <code>insert</code> é€²å»ï¼Œå°±åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// åˆ©ç”¨ Clone å¯¦ç¾çš„è¯é›†ã€‚å®Œæ•´å¯¦ä½œè¦‹ bit.ly/caab7fb
pub fn union(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; HashSet&lt;T&gt; {
    // è¤‡è£½ä¸€æ•´ä»½ other åˆ°æ–°çš„ set
    let mut new_set: HashSet&lt;T&gt; = other.clone();

    // æŠŠç¾æœ‰çš„ item ä¸€ä¸€å¡åˆ°æ–°çš„ setï¼Œé‡è¤‡çš„ item æœƒç›´æ¥è¦†å¯«æ‰
    self.hash_map.iter().for_each(|(k, _)| {
        new_set.insert(k.clone());
    });

    // å›å‚³ self èˆ‡ other çš„è¯é›†
    new_set
}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶è€Œï¼Œä¸Šè¿°åšæ³•æœ‰å…©å€‹ç¼ºé»ï¼š</p>
<ol>
<li>å»ºç«‹äº†ä¸€å€‹å…¨æ–°çš„ HashSet å¯¦ä¾‹ï¼ŒèŠ±äº†é¡å¤–çš„æ™‚é–“èˆ‡ç©ºé–“</li>
<li>å¿…é ˆç‚º <code>HashSet</code> å’Œ item çš„å‹åˆ¥ <code>T</code> é¡å¤–åŠ ä¸Š <code>Clone</code> trait çš„é™åˆ¶</li>
</ol>
<p>å› æ­¤æ¥ä¸‹ä¾†æˆ‘å€‘å˜—è©¦åˆ©ç”¨ Rust çš„ <code>iterator</code> çš„ç‰¹æ€§å¯¦ç¾æ›´ç¯€çœè³‡æºçš„ç‰ˆæœ¬ï¼</p>
<blockquote>
<p>æ›´å¤šè©³æƒ…å¯åƒè€ƒå¯¦ä½œéç¨‹çš„<a href="https://github.com/weihanglo/rust-algorithm-club/pull/15#issuecomment-427587785">è¨è«–ä¸²</a>èˆ‡<a href="https://github.com/weihanglo/rust-algorithm-club/pull/15/commits/caab7fbc5323e09eb1e30ea374eb21a59f955bad">ç¬¬ä¸€æ¬¡å˜—è©¦çš„å®Œæ•´å¯¦ä½œ</a>ã€‚</p>
</blockquote>
<h4><a class="header" href="#ç¬¬äºŒæ¬¡å˜—è©¦---lazy-iterator" id="ç¬¬äºŒæ¬¡å˜—è©¦---lazy-iterator">ç¬¬äºŒæ¬¡å˜—è©¦ - Lazy Iterator</a></h4>
<p>æœ‰äº†ç¬¬ä¸€æ¬¡å˜—è©¦çš„ç¶“é©—ï¼Œç¬¬äºŒæ¬¡æ±ºå®šè®“ <code>union()</code> å›å‚³ä¸€å€‹ lazy iteratorï¼Œæœƒç–Šä»£è¯é›†çš„å…ƒç´ ï¼Œå¿…è¦æ‰å¾ç–Šä»£å™¨æ”¶é›†æ‰€æœ‰å…ƒç´ ï¼Œå†å»ºç«‹æ–°çš„é›†åˆï¼Œå¦‚æ­¤å¯ä»¥ç¯€çœè¨±å¤šé‹ç®—è³‡æºã€‚</p>
<p>è‡³æ–¼å¯¦ä½œæ­¥é©Ÿï¼Œæˆ‘å€‘å¯ä»¥ï¼š</p>
<ol>
<li>å…ˆè£½é€ ä¸€å€‹ç–Šä»£å™¨ï¼ŒåŒ…å«æ‰€æœ‰ <code>other</code> é›†åˆçš„å…ƒç´ ï¼Œä½†éæ¿¾æ‰èˆ‡ <code>self</code> å…±æœ‰çš„å…ƒç´ ã€‚</li>
<li>å†å°‡ <code>self</code> çš„ç–Šä»£å™¨èˆ‡æ­¥é©Ÿä¸€ç”¢ç”Ÿçš„ç–Šä»£å™¨ï¼Œåˆ©ç”¨ <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.chain"><code>Iterator::chain</code></a> é€£èµ·ä¾†ã€‚</li>
</ol>
<p>é€™æ¨£å…¶å¯¦å°±æ˜¯ <code>other \ self</code> é€™å€‹å·®é›†ï¼ŒåŠ ä¸Š <code>self</code> è‡ªèº«ï¼Œå‰›å¥½å°±æ˜¯è¯é›†ã€‚ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ä½¿ç”¨ impl trait èªæ³•ï¼Œé¿å…å®£å‘Šä¸åŒç–Šä»£å™¨å‹åˆ¥çš„éº»ç…©ã€‚
pub fn union(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    // å¯¦éš›ä¸Šå°±æ˜¯å·®é›†
    let other_but_not_self = other.iter().filter(|item| !self.contains(item));
    // å·®é›† + self æœ¬èº«
    self.iter().chain(other_but_not_self)
}
<span class="boring">}
</span></code></pre></pre>
<h4><a class="header" href="#lifetime-elision" id="lifetime-elision">Lifetime Elision</a></h4>
<p>ä½†å¾ˆä¸å¹¸åœ°ï¼ŒCompiler error E0623ï¼ˆç”šè‡³æŸ¥ä¸åˆ° E0623 æ˜¯ä»€éº¼ï¼‰ã€‚</p>
<pre><code class="language-bash">error[E0623]: lifetime mismatch
   --&gt; src/collections/set/mod.rs:117:48
    |
117 |     pub fn union(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    |                                -----------     ^^^^^^^^^^^^^^^^^^^^^^^^
    |                                |               |
    |                                |               ...but data from `other` is returned here
    |                                this parameter and the return type are declared with different lifetimes...
</code></pre>
<p>æ˜¯ <code>self</code> èˆ‡ <code>other</code> çš„ç”Ÿå‘½é€±æœŸä¸åŒå°è‡´ï¼Œç•¶é€™å…©å€‹é›†åˆçš„ç–Šä»£å™¨è¢« chain èµ·ä¾†å¾Œå›å‚³ï¼Œç·¨è­¯å™¨ç„¡æ³•ç¢ºèª Iterator çš„ Item ç”Ÿå‘½é€±æœŸå¤šé•·ã€‚ä½ å¯èƒ½å¾ˆå¥½å¥‡ç‚ºä»€éº¼ <code>self</code> èˆ‡ <code>other</code> ç”Ÿå‘½é€±æœŸä¸åŒï¼Œäº‹å¯¦ä¸Šï¼ŒRust ç‚ºäº†è®“èªæ³•è¼•é¬†ä¸€é»ï¼Œå…è¨±å‡½æ•¸çœç•¥éƒ¨åˆ†ç”Ÿå‘½é€±æœŸæ¨™è¨»ï¼Œé€™å€‹è¡Œç‚ºç¨±ä½œ <a href="https://doc.rust-lang.org/nomicon/lifetime-elision.html">Lifetime Elision</a>ï¼Œæœƒåœ¨å„ç¨®ä¸åŒçš„æ¢ä»¶ä¸‹åŠ è¨»ç”Ÿå‘½é€±æœŸï¼Œå…¶ä¸­æœ‰ä¸€æ¢æ˜¯ã€Œ<strong>æ¯å€‹è¢«çœç•¥çš„ç”Ÿå‘½é€±æœŸéƒ½æœƒæˆç‚ºç¨ç«‹çš„ç”Ÿå‘½é€±æœŸ</strong>ã€ã€‚å› æ­¤ï¼Œ<code>union()</code> åŠ ä¸Šè¢«çœç•¥çš„ç”Ÿå‘½é€±æœŸï¼Œæœƒé•·å¾—åƒï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn union&lt;'a, 'b&gt;(&amp;'a self, other: &amp;'b HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;'a ??? &amp;'b ???T&gt;;
<span class="boring">}
</span></code></pre></pre>
<p>æ–¼æ˜¯ä¹ï¼Œç·¨è­¯å™¨ç„¡æ³•ç†è§£ Iterator&lt;Item = &amp;T&gt; çš„ <code>&amp;T</code> åˆ°åº•ç”Ÿå‘½é€±æœŸæ˜¯ â€˜a é‚„æ˜¯ â€˜bï¼Œå°±ä¸çµ¦ç·¨è­¯ã€‚</p>
<p>è§£æ³•ä¹Ÿå¾ˆç°¡å–®ï¼Œåˆä½µ <code>self</code> èˆ‡ <code>other</code> çš„ç”Ÿå‘½é€±æœŸåˆ°åŒä¸€å€‹ï¼Œä¸è«–æ˜¯èªæ„ä¸Šï¼ˆå…©å€‹é›†åˆè‡³å°‘æ´»å¾—ä¸€æ¨£é•·ï¼‰é‚„æ˜¯ç·¨è­¯æ¢ä»¶éƒ½èªªå¾—é€šã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// åŠ ä¸Š 'a ï¼Œè®“ selfã€other çš„ç”Ÿå‘½é€±æœŸè‡³å°‘åœ¨é€™å€‹å‡½æ•¸å…§ä¸€æ¨£é•·
pub fn union&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    let other_but_not_self = other.iter().filter(|item| !self.contains(item));
    self.iter().chain(other_but_not_self)
}
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>æ›´å¤š Lifetime Elision çš„è³‡è¨Šï¼Œå¯ä»¥åƒè€ƒ <a href="https://doc.rust-lang.org/nomicon/lifetime-elision.html">Rust é»‘é­”æ³• Nomicon</a> èˆ‡ <a href="https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html#lifetime-elision">Rust TRPL çš„è§£é‡‹</a>ï¼Œé‚„æœ‰ç›¸é—œçš„ <a href="https://github.com/rust-lang/rfcs/blob/master/text/0141-lifetime-elision.md">RFC</a> å¯ä»¥çœ‹ã€‚</p>
</blockquote>
<h4><a class="header" href="#move-closure" id="move-closure"><code>move</code> closure</a></h4>
<p>è§£æ±ºäº†ç”Ÿå‘½é€±æœŸï¼Œç·¨è­¯çœ‹çœ‹å°±çŸ¥é“èª°æ²’ç©¿è¤²å­ã€‚<a href="https://doc.rust-lang.org/error-index.html#E0373">Compiler error E0373</a>ï¼Œæ˜¯é‡ç”Ÿçš„ borrow checkerï¼</p>
<pre><code class="language-bash">error[E0373]: closure may outlive the current function, but it borrows `self`, which is owned by the current function
   --&gt; src/collections/set/mod.rs:118:53
    |
118 |         let other_but_not_self = other.iter().filter(|item| !self.contains(item));
    |                                                     ^^^^^^  ---- `self` is borrowed here
    |                                                     |
    |                                                     may outlive borrowed value `self`
    |
note: closure is returned here
   --&gt; src/collections/set/mod.rs:119:9
    |
119 |         self.iter().chain(other_but_not_self)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: to force the closure to take ownership of `self` (and any other referenced variables), use the `move` keyword
    |
118 |         let other_but_not_self = other.iter().filter(move |item| !self.contains(item));
</code></pre>
<p>è®“æˆ‘å€‘å˜—è©¦ç†è§£ï¼Œç•¶æˆ‘å€‘å›å‚³ iterator æ™‚ï¼Œæ•´å€‹éæ¿¾å…±åŒå…ƒç´ çš„ closure æœƒé€£å¸¶ä¸€èµ·å›å‚³ï¼Œè‹¥ closure æ²’æœ‰ä½¿ç”¨ <code>move</code> é—œéµå­—ä¿®é£¾ï¼Œç·¨è­¯å™¨æœƒå˜—è©¦ä»¥å‚·å®³æœ€å°çš„æ–¹å¼å»æ•ç²è®Šæ•¸ï¼Œåœ¨é€™è£¡æœƒæ˜¯ immutable borrow <code>&amp;T</code> æ•ç²ã€‚é€™è£¡çš„ <code>self</code> å¯¦éš›å‹åˆ¥æ˜¯ <code>&amp;'a mut HashSet&lt;T&gt;</code>ï¼Œå¯ä»¥æƒ³åƒæˆ closure æ•ç²äº† <code>&amp;(&amp;'a mut HashSet&lt;T&gt;)</code>ã€‚</p>
<blockquote>
<p>Rust ç·¨è­¯å™¨é‡åˆ° closure éœ€è¦æ•ç²è®Šæ•¸æ™‚ï¼Œå¦‚æœæ²’æœ‰ç”¨ <code>move</code> ä¿®é£¾ï¼Œæœƒå˜—è©¦ä½¿ç”¨ä»¥ä¸‹é †åºä¾†æ•ç²ï¼š <code>&amp;T</code> &gt; <code>&amp;mut T</code> &gt; <code>T</code>ã€‚è‹¥ç”¨äº† <code>move</code> ä¿®é£¾ï¼Œå‰‡æœƒç›´æ¥å°‡æ‰€æœ‰æ¬Šè½‰ç§»é€² clousure ä¸­ï¼Œä¹Ÿå°±æ˜¯æ•ç² <code>T</code>ã€‚</p>
</blockquote>
<p>å¯æƒœçš„æ˜¯ï¼Œå¤šå‡ºä¾†çš„é€™å±¤ borrow ä¸¦æ²’æœ‰ç›¸åŒçš„ç”Ÿå‘½é€±æœŸ <code>'a</code>ï¼Œç·¨è­¯å™¨ç„¡æ³•è­˜åˆ¥å®ƒæœƒæ´»åˆ°ä»€éº¼æ™‚å€™ï¼Œå¯èƒ½ <code>self</code> çš„è³‡æºå·²è¢«é‡‹æ”¾ï¼Œä½† closure é‚„æ²’çµæŸï¼Œæœ‰æ©Ÿæœƒç”¢ç”Ÿ <a href="https://en.wikipedia.org/wiki/Dangling_pointer">dangling pointer</a>ï¼Œç·¨è­¯å™¨å› æ­¤ç¦æ­¢é€™ç¨®å±éšªæ“ä½œã€‚</p>
<p>ç·¨è­¯å™¨ä¹Ÿååˆ†å¥½å¿ƒåœ°æç¤ºï¼Œåªè¦ä½¿ç”¨ <code>move</code> é—œéµå­—ï¼Œå°‡ <code>self</code> çš„æ‰€æœ‰æ¬Šè½‰ç§»è‡³ closure ä¸­ï¼Œå°±èƒ½é¿å…ç”Ÿå‘½é€±æœŸä¸ä¸€è‡´çš„å•é¡Œã€‚ä½ å¯èƒ½æœ‰äº›ç–‘æƒ‘ï¼ŒæŠŠ <code>self</code> move é€² closure ä¹‹å¾Œï¼Œ<code>self</code> ä¸å°±æœƒè¢« drop é‡‹æ”¾æ‰äº†ï¼Ÿå¯ä»¥é€™æ¨£ç†è§£ï¼Œè½‰ç§»é€² closure çš„å‹åˆ¥æ˜¯æ•´å€‹ <code>self</code>ï¼Œä¹Ÿå°±æ˜¯ <code>&amp;'a mut HashSet&lt;T&gt;</code> å‹åˆ¥ï¼Œè§£è®€ç‚ºç·¨è­¯å™¨å°‡ <code>self</code> çš„å‹åˆ¥çœ‹ä½œæ–°çš„ owned typeï¼Œæ‰€æœ‰æ¬Šå¯åˆæ³•è½‰ç§»ï¼Œä½†åº•å±¤ä»ä¿ç•™æŒ‡å‘åŸå§‹è³‡æ–™çš„ borrowï¼Œå·§å¦™é¿é–‹ç”Ÿå‘½é€±æœŸå•é¡Œã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn union&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    // ç”¨ move ä¿®é£¾ closure
    // selfï¼ˆ&amp;'a HashSet&lt;T&gt;ï¼‰è¢«æ•´å€‹è½‰ç§»é€² closure
    let other_but_not_self = other.iter().filter(move |item| !self.contains(item));
    self.iter().chain(other_but_not_self)
}
<span class="boring">}
</span></code></pre></pre>
<h3><a class="header" href="#å¯¦ä½œäº¤é›†å·®é›†èˆ‡å°ç¨±å·®é›†" id="å¯¦ä½œäº¤é›†å·®é›†èˆ‡å°ç¨±å·®é›†">å¯¦ä½œäº¤é›†ã€å·®é›†èˆ‡å°ç¨±å·®é›†</a></h3>
<p>å‘¼ï¼Œä¸Šé¢è§£æ±ºäº†æœ€å›°é›£çš„ç”Ÿå‘½é€±æœŸå’Œ borrow checker å•é¡Œï¼Œæ¥ä¸‹ä¾†çš„å¯¦ä½œåªè¦é—œæ³¨æ•¸å­¸ä¸Šçš„é›†åˆå®šç¾©å°±èƒ½è¼•é¬†è§£æ±ºäº†ã€‚</p>
<p>é¦–å…ˆï¼Œäº¤é›†çš„å®šç¾©ç‚ºã€Œä½ æœ‰ï¼Œè€Œä¸”æˆ‘ä¹Ÿæœ‰çš„ã€ï¼Œç°¡å–®ï¼Œç–Šä»£ <code>self</code> ä¸¦éæ¿¾å‡º <code>other</code> ä¹Ÿæœ‰çš„å…ƒç´ å°±å¥½ï¼Œç§’æ®ºï¼</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn intersection&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    self.iter().filter(move |item| other.contains(item))
}
<span class="boring">}
</span></code></pre></pre>
<p>å†ä¾†æ˜¯å·®é›†ï¼Œæ¦‚å¿µæ˜¯å°±æ˜¯ã€Œæˆ‘æœ‰ï¼Œä½†ä½ æ²’æœ‰çš„ã€ï¼Œä¸€æ¨£ç–Šä»£ <code>self</code> ä¸¦éæ¿¾å‡º <code>other</code> æ²’æœ‰çš„å…ƒç´ ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn difference&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    self.iter().filter(move |item| !other.contains(item))
}
<span class="boring">}
</span></code></pre></pre>
<p>å‰›å‰›å¯¦ä½œ <code>union</code> æœ‰ç”¨åˆ°å·®é›†ï¼Œæˆ‘å€‘å¯ä»¥ç¨å¾®æ”¹å¯«ï¼Œè®“ <code>union</code> çš„ç¨‹å¼ç¢¼æ›´ç¥æ¸…æ°£çˆ½ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn union&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    // self âˆª (other \ self)
    self.iter().chain(other.difference(self))
}
<span class="boring">}
</span></code></pre></pre>
<p>æœ€å¾Œï¼Œå°ç¨±å·®é›†å¯ä»¥é€éçµ„åˆä¸Šé¢çš„æ“ä½œç®—å‡ºï¼Œå¯ä»¥æ˜¯ï¼šã€Œæˆ‘æœ‰åŠ ä¸Šä½ æœ‰çš„ï¼Œæ¸›å»æˆ‘å€‘å…±åŒæœ‰çš„ã€ï¼Œä¹Ÿå¯ä»¥æ˜¯ã€Œæˆ‘æœ‰ä½†ä½ æ²’æœ‰çš„ï¼ŒåŠ ä¸Šä½ æœ‰ä½†æˆ‘æ²’æœ‰çš„ã€ï¼Œé€™è£¡æˆ‘å€‘é¸æ“‡ç¬¬äºŒç¨®å¯¦ä½œã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn symmetric_difference&lt;'a&gt;(&amp;'a self, other: &amp;'a HashSet&lt;T&gt;) -&gt; impl Iterator&lt;Item = &amp;T&gt; {
    // (self \ other) âˆª (other \ self)
    self.difference(other).chain(other.difference(self))
}
<span class="boring">}
</span></code></pre></pre>
<p>æ•´å€‹é›†åˆçš„åŸºç¤åœ¨é€™é‚Šå¤§åŠŸå‘Šæˆäº†ï¼</p>
<h3><a class="header" href="#å­é›†è¶…é›†èˆ‡ä¸äº¤é›†" id="å­é›†è¶…é›†èˆ‡ä¸äº¤é›†">å­é›†ã€è¶…é›†èˆ‡ä¸äº¤é›†</a></h3>
<p>ç¶“æ­· Rust ç·¨è­¯å™¨çš„æ‘§æ®˜ï¼Œä¾†å¯¦ä½œæ¯”è¼ƒç°¡å–®çš„æ–¹æ³•å§ã€‚é›†åˆé‹ç®—å¸¸è¦æ¯”è¼ƒå…©å€‹é›†åˆçš„é—œä¿‚ï¼Œä¾‹å¦‚ A âŠ† B ä»£è¡¨ A æ˜¯ B çš„å­é›†ï¼Œå®šç¾©æ˜¯ A è£¡é¢çš„å…ƒç´  B éƒ½æœ‰ã€‚</p>
<p>æˆ‘å€‘å…ˆä¾†å¯¦ä½œ <code>is_subset</code> æª¢æŸ¥ <code>self</code> æ˜¯å¦ç‚º <code>other</code> çš„å­é›†ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn is_subset(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; bool {
    // è‹¥ self çš„å…ƒç´ æ¯” other å¤šï¼Œå°±ä¸å¯èƒ½æ˜¯ self âŠ† other
    // æ‰€ä»¥æå‰å›å‚³ false
    if self.len() &gt; other.len() {
        return false;
    }
    // åˆ©ç”¨ all ç¢ºèª other å…§åŒ…å« self çš„æ‰€æœ‰å…ƒç´ 
    self.iter().all(|item| other.contains(&amp;item))
}
<span class="boring">}
</span></code></pre></pre>
<p><code>is_superset</code> æª¢æŸ¥ <code>self</code> æ˜¯å¦ç‚º <code>other</code> çš„è¶…é›†å°±æ›´ç°¡å–®äº†ï¼Œåªè¦æŠŠ <code>is_subset</code> åéä¾†ä½¿ç”¨å°±è¡Œäº†ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn is_superset(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; bool {
    // self âŠ‡ other = other âŠ† self
    other.is_subset(self)
}
<span class="boring">}
</span></code></pre></pre>
<p>æœ€å¾Œï¼Œæˆ‘å€‘å¸¸æœƒæª¢æŸ¥å…©å€‹é›†åˆæ˜¯å¦æ²’æœ‰äº¤é›†ï¼ˆdisjointï¼‰ï¼Œé€™å€‹æ–¹æ³•åªè¦æª¢æŸ¥äº¤é›† <code>intersection()</code> ç–Šä»£å™¨çš„é•·åº¦æ˜¯å¦ç‚º 0 å°±å¯ä»¥äº†ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn is_disjoint(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; bool {
    self.intersection(other).count() == 0
}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#äºŒå…ƒé‹ç®—èˆ‡é‹ç®—å­" id="äºŒå…ƒé‹ç®—èˆ‡é‹ç®—å­">äºŒå…ƒé‹ç®—èˆ‡é‹ç®—å­</a></h2>
<p>ä¸Šé¢çš„æ–¹æ³•å¥½å†—ï¼Œèƒ½ä¸èƒ½å’Œ <a href="https://docs.python.org/3/library/stdtypes.html#set">Python</a> ä¸€æ¨£ï¼Œç”¨ç°¡å–®æ˜ç­çš„èªæ³•æ“ä½œé›†åˆçš„äºŒå…ƒé‹ç®—ï¼Ÿç•¶ç„¶è¡Œï¼ŒRust çš„è¡¨é”æ€§å¾ˆå¼·ï¼Œå®Œå…¨ä¸è¼¸ Pythonï¼Œé€é<a href="https://en.wikipedia.org/wiki/Operator_overloading">é‹ç®—å­å¤šè¼‰ï¼ˆoperator overloadingï¼‰</a>ã€‚</p>
<h3><a class="header" href="#é‹ç®—å­å¤šè¼‰" id="é‹ç®—å­å¤šè¼‰">é‹ç®—å­å¤šè¼‰</a></h3>
<p>Rust æä¾›è¨±å¤š trait ä¾›ä½¿ç”¨è€…å¤šè¼‰é‹ç®—å­ï¼Œå¯ä»¥ç°¡åŒ–é›†åˆçš„äºŒå…ƒé‹ç®—ï¼š</p>
<ul>
<li><code>set | other</code>ï¼šbitwise or é‹ç®—å­ï¼Œæ•ˆæœåŒ <code>union</code> è¯é›†ã€‚</li>
<li><code>set &amp; other</code>ï¼šbitwise and æ•ˆæœåŒ <code>intersection</code> äº¤é›†ã€‚</li>
<li><code>set - other</code>ï¼šsubstraction é‹ç®—å­ï¼Œæ•ˆæœåŒ <code>difference</code> å·®é›†ã€‚</li>
<li><code>set ^ other</code>ï¼šbitwise xor é‹ç®—å­ï¼Œæ•ˆæœåŒ <code>symmetric_difference</code> å°ç¨±å·®é›†ã€‚</li>
</ul>
<p>ç”±æ–¼å››å€‹é‹ç®—å­å¯¦ä½œçš„æ¦‚å¿µç›¸åŒï¼Œé€™è£¡æŒ‘ <code>|</code> <strong>bitwise or</strong> ä¾†è§£é‡‹å¦‚ä½•å®¢è£½åŒ–é‹ç®—å­é‚è¼¯ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// å¯¦ä½œ BitOr å¤šè¼‰ `|` é‹ç®—å­
impl&lt;'a, 'b, T&gt; BitOr&lt;&amp;'b HashSet&lt;T&gt;&gt; for &amp;'a HashSet&lt;T&gt;
where
    T: Hash + Eq + Clone, // å¯¦ä½œ Clone è®“ Set å¯é€é FromIterator å»ºç«‹å¯¦ä¾‹
{
    type Output = HashSet&lt;T&gt;;

    fn bitor(self, rhs: &amp;'b HashSet&lt;T&gt;) -&gt; Self::Output {
        // åˆ©ç”¨ FromIterator æä¾›çš„ collect() è’é›†å…ƒç´ ï¼Œç”¢ç”Ÿæ–° Set
        self.union(&amp;rhs).cloned().collect()
    }
}
<span class="boring">}
</span></code></pre></pre>
<ol>
<li>è¦å¤šè¼‰ bit or é‹ç®—å­ï¼Œä»£è¡¨å‹åˆ¥è¦å¯¦ä½œ <code>BitOr</code> traitã€‚</li>
<li>ç”±æ–¼é‹ç®—å­çš„ required method é€šå¸¸æœƒ consume <code>self</code> çš„æ‰€æœ‰æ¬Šï¼Œå› æ­¤æˆ‘å€‘è¦åœ¨ impl å‹•æ‰‹è…³ï¼Œæ”¹ä»¥ <code>&amp;HashSet&lt;T&gt;</code> ä½œç‚º <code>BitOr</code> å¯¦ä½œçš„å°è±¡ã€‚</li>
<li>ç‚ºäº†ç°¡åŒ–å¯¦ä½œï¼Œäº¤é›†è¯é›†ç­‰é‹ç®—å­æ”¹ç‚ºç”¢ç”Ÿä¸€å€‹æ–°çš„ Set å¯¦ä¾‹ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œ<code>T</code> æ³›å‹å‹åˆ¥éœ€è¦å¯¦ç¾ <code>Clone</code> traitï¼Œæ‰èƒ½è¤‡è£½èˆŠçš„å€¼ç”¢ç”Ÿæ–°çš„ Setã€‚</li>
</ol>
<blockquote>
<p>å¤šè¼‰é‹ç®—å­ï¼Œå¯ä»¥åƒè€ƒ <a href="https://doc.rust-lang.org/beta/std/ops/index.html">Overloadable operators</a> ä¸€é çš„èªªæ˜ã€‚</p>
</blockquote>
<h3><a class="header" href="#æ¯”è¼ƒé‹ç®—å­" id="æ¯”è¼ƒé‹ç®—å­">æ¯”è¼ƒé‹ç®—å­</a></h3>
<p>é™¤äº†äº¤é›†ã€è¯é›†ç­‰é‹ç®—ï¼Œæˆ‘å€‘é‚„å¯ä»¥å¯¦ä½œé›†åˆé–“çš„æ¯”è¼ƒï¼Œä½œç‚ºæª¢æŸ¥æ˜¯å¦ç‚ºå­é›†æˆ–è¶…é›†çš„é‹ç®—å­ã€‚</p>
<ul>
<li><code>A &lt;= B</code>ï¼šæ•ˆæœåŒ <code>is_subset</code>ï¼ŒA æ˜¯å¦ç‚º B çš„å­é›† A âŠ† Bã€‚</li>
<li><code>A &lt; B</code>ï¼šA æ˜¯å¦ç‚º B çš„å­é›†ä¸”ä¸ç­‰æ–¼ Bï¼Œç­‰åŒæ–¼ A âŠ‚ Bã€‚</li>
<li><code>A &gt;= B</code>ï¼šæ•ˆæœåŒ <code>is_superset</code>ï¼ŒA æ˜¯å¦ç‚º B çš„è¶…é›† A âŠ‡ Bã€‚</li>
<li><code>A &gt; B</code>ï¼šA æ˜¯å¦ç‚º B çš„è¶…é›†ä¸”ä¸ç­‰æ–¼ Bï¼Œç­‰åŒæ–¼ A âŠƒ Bã€‚</li>
</ul>
<p>ä½†çœ¼å°–çš„ Rustacean è‚¯å®šæœƒç™¼ç¾ï¼Œ<a href="https://doc.rust-lang.org/beta/std/ops/index.html"><code>std::ops</code></a> è£¡é¢æ ¹æœ¬æ²’æœ‰ <code>lt</code>ã€<code>gt</code> ç­‰æ¯”è¼ƒé‹ç®—å­ã€‚Rust çš„ã€Œæ¯”è¼ƒã€æ˜¯é€éå¯¦ä½œå¹¾å€‹ Trait å¾Œï¼Œè‡ªå‹•æ¨å°ç”Ÿæˆçš„æ–¹æ³•ï¼Œé€™äº› trait æ”¾åœ¨ <a href="https://doc.rust-lang.org/std/cmp/index.html"><code>std::cmp</code></a> module ä¸­ï¼Œåˆ†åˆ¥æ˜¯<a href="https://doc.rust-lang.org/std/cmp/trait.Eq.html"><code>Eq</code></a>ã€<a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html"><code>ParitalEq</code></a>ã€<a href="https://doc.rust-lang.org/std/cmp/trait.Ord.html"><code>Ord</code></a>ï¼Œä»¥åŠ <a href="https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html"><code>ParitalOrd</code></a>ã€‚</p>
<p>åœ¨é–‹å§‹ä»‹ç´¹å¦‚ä½•å¯¦ä½œæ¯”è¼ƒå‰ï¼Œå…ˆè®“è¤‡ç¿’ä¸€ä¸‹é›¢æ•£æ•¸å­¸å­¸åˆ°çš„äºŒå…ƒé—œä¿‚ï¼š</p>
<p>è‹¥ âˆ¼ ç‚ºä¸€ç¨®äºŒå…ƒé—œä¿‚ï¼ŒA ç‚ºä»»æ„é›†åˆã€‚</p>
<ul>
<li>è‡ªåæ€§ï¼ˆReflexiveï¼‰ï¼šå°æ‰€æœ‰ x âˆˆ A : x âˆ¼ xã€‚ </li>
<li>å°ç¨±æ€§ï¼ˆSymmetricï¼‰ï¼šå°æ‰€æœ‰ x, y âˆˆ A ï¼Œè‹¥ x âˆ¼ y å‰‡ y âˆ¼ xã€‚</li>
<li>å‚³éæ€§ï¼ˆTransitiveï¼‰ï¼šå°æ‰€æœ‰ x, y, z âˆˆ A ï¼Œè‹¥ x âˆ¼ y ä¸” y âˆ¼ z å‰‡ x âˆ¼ zã€‚</li>
<li>åå°ç¨±ï¼ˆAntisymmetricï¼‰ï¼šå°æ‰€æœ‰ x, y âˆˆ Aï¼Œè‹¥ x âˆ¼ y ä¸” x â‰  y å‰‡ y âˆ¼ x ä¸æˆç«‹ã€‚</li>
</ul>
<p>Rust ä¸­çš„ç›¸ç­‰é—œä¿‚æœ‰å…¶ç†è«–èƒŒæ™¯ï¼Œ<code>Eq</code> å°±æ˜¯æ•¸å­¸ä¸Šçš„ <a href="https://en.wikipedia.org/wiki/Equivalence_relation">Equivalence relation</a>ï¼Œé ˆç¬¦åˆè‡ªåæ€§ã€å°ç¨±æ€§ï¼ŒåŠå‚³éæ€§ï¼›èˆ‡ä¹‹å°æ‡‰çš„æ˜¯ <code>PartialEq</code>ï¼Œ<a href="https://en.wikipedia.org/wiki/Partial_equivalence_relation">Partial equivalence</a> å…·æœ‰å°ç¨±æ€§å’Œå‚³éæ€§ï¼Œä½†ä¸¦ç„¡è‡ªåæ€§ï¼Œæœ‰åçš„ä¾‹å­æ˜¯ <a href="https://ieeexplore.ieee.org/document/4610935">IEEE754 çš„æµ®é»æ•¸</a> å®šç¾©äº† <code>NaN == NaN -&gt; false</code>ï¼Œæµ®é»æ•¸å› æ­¤ä¸ç¬¦åˆè‡ªåæ€§å®šç¾©ã€‚</p>
<p>å›åˆ°é›†åˆï¼Œé›†åˆè«–ä¸­çš„é›†åˆç›¸ç­‰ï¼ˆset equalityï¼‰å®šç¾©ç‚ºï¼šx = y â‡’ âˆ€z, (z âˆˆ x â‡” z âˆˆ y)ï¼Œä¹Ÿå°±æ‰€æœ‰å±¬æ–¼é›†åˆ x çš„å…ƒç´ å¿…å±¬æ–¼é›†åˆ yï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ï¼Œé›†åˆç›¸ç­‰å…·æœ‰è‡ªåæ€§ã€å°ç¨±æ€§ã€å‚³éæ€§ã€‚å¯¦ä½œ <code>==</code> é‹ç®—å­ï¼Œæˆ‘å€‘æœƒ</p>
<ol>
<li>æ¯”è¼ƒé›†åˆ x, y å…§å…ƒç´ æ•¸ç›®ï¼ˆcardinalityï¼‰æ˜¯å¦ä¸€è‡´ï¼Œä»¥åŠ</li>
<li>ç–Šä»£é›†åˆ xï¼Œä¸¦æª¢æŸ¥æ˜¯å¦æ¯å€‹å±¬æ–¼ x çš„å…ƒç´ éƒ½å±¬æ–¼ yã€‚</li>
</ol>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T&gt; PartialEq for HashSet&lt;T&gt;
where
    T: Hash + Eq,
{
    fn eq(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; bool {
        // 1. æª¢æŸ¥ cardinalityï¼Œä¸åŒé•·åº¦å°±ä¸å¯èƒ½ç›¸ç­‰
        if self.len() != other.len() {
            return false;
        }
        // 2. åˆ©ç”¨ Iterator::all ç¢ºä¿æ¯å€‹ self çš„å…ƒç´ éƒ½å±¬æ–¼ otherã€‚
        self.iter().all(|item| other.contains(&amp;item))
    }
}

/// `Eq` ä¸¦æ²’æœ‰ required methodï¼Œåªè¦å¯¦ä½œ `Partial::eq` æ–¹æ³•ï¼Œå°±èƒ½ç›´æ¥æ¨æ–·å‡º `Eq`ã€‚
impl&lt;T&gt; Eq for HashSet&lt;T&gt; where T: Hash + Eq {}
<span class="boring">}
</span></code></pre></pre>
<p>èˆ‡ç›¸ç­‰é—œä¿‚ç›¸åŒï¼ŒRust çš„æ’åºé—œä¿‚åŒæ¨£æœ‰ç†è«–ä¾æ“šï¼Œ<code>Ord</code> æ˜¯æ•¸å­¸ä¸Šçš„ <a href="https://en.wikipedia.org/wiki/Total_order">Total order</a>ï¼Œç¬¦åˆåå°ç¨±æ€§ã€å‚³éæ€§ï¼Œä»¥åŠ <a href="https://en.wikipedia.org/wiki/Connex_relation">connex relation</a>ï¼›è€Œ <code>ParitalOrd</code> å‰‡æ¥è¿‘æ•¸å­¸ä¸Šçš„ partial orderï¼ŒRust çš„æ–‡ä»¶ä¸­æè¿°è©² trait é ˆç¬¦åˆåå°ç¨±æ€§èˆ‡å‚³éæ€§ã€‚</p>
<blockquote>
<p>Connex relationï¼šåœ¨é›†åˆ X ä¸‹ï¼Œæ‰€æœ‰ (x, y) pair éƒ½æœƒç¬¦åˆ x âˆ¼ y æˆ– y âˆ¼ x çš„é—œä¿‚ã€‚åœ¨æ’åºé—œä¿‚ä¸Šï¼Œæ„æŒ‡ä¸æ˜¯ x â‰¥ y å°±æ˜¯ y â‰¥ xã€‚</p>
</blockquote>
<p>è¦æŠŠé›†åˆçš„ã€ŒåŒ…å«æ–¼ä½†ä¸ç›¸ç­‰ã€é—œä¿‚ âŠ‚ æ˜ å°„åˆ°æ’åºé—œä¿‚ <code>x &lt; y</code> å‰ï¼Œå…ˆä¾†æª¢é©— âŠ‚ æœ‰ä»€éº¼ç‰¹æ€§ã€‚</p>
<ul>
<li>å…·åå°ç¨±æ€§ï¼šè‹¥ x âŠ‚ y ä¸” x â‰  y å‰‡ y âŠ„ xï¼Œæ›å¥è©±èªªï¼Œè‹¥ x âŠ‚ y ä¸” y âŠ‚ x å‰‡ x = yã€‚</li>
<li>å…·å‚³éæ€§ï¼šè‹¥ x âŠ‚ y ä¸” y âŠ‚ z å‰‡ x âŠ‚ zã€‚</li>
<li>ä¸å…· connex relationï¼šè‹¥ x = {1,2}, y = {3,4}ï¼Œå‰‡ x, y ç„¡æ³•ä»¥ âŠ‚ è¡¨ç¤ºå…©è€…é–“çš„é—œä¿‚ã€‚</li>
</ul>
<p>å¾ˆæ˜é¡¯åœ°ï¼Œã€ŒåŒ…å«æ–¼ä½†ä¸ç›¸ç­‰ã€ç¬¦åˆ partial order ä½†ä¸æ˜¯ total orderã€‚æˆ‘å€‘é¸æ“‡å¯¦ä½œ <code>PartialOrd</code> traitï¼Œå…¶æœ‰ä¸€å€‹ required method <code>PartialOrd::partial_cmp</code>ã€‚</p>
<ol>
<li><code>partial_cmp</code> å›å‚³ <code>Option&lt;Ordering&gt;</code>ï¼Œå› ç‚ºå…©å€‹é›†åˆå¯èƒ½ç„¡äº¤é›†ï¼Œå°è‡´ç„¡æ³•ç›¸äº’æ¯”è¼ƒã€‚</li>
<li>å…ˆæª¢æŸ¥ <code>other</code> æ˜¯ä¸æ˜¯å­é›†ï¼Œå†æª¢æŸ¥æ˜¯ä¸æ˜¯é•·åº¦ç›¸åŒï¼Œå¾—åˆ°å…©å€‹ <code>bool</code>ã€‚</li>
<li>æœ‰äº†ä¸Šè¿°å…©å€‹ <code>bool</code>ï¼Œå°±å¯ä»¥ç”¨ pattern matching æŠŠæ‰€æœ‰æƒ…æ³åˆ—èˆ‰å‡ºä¾†ã€‚
<ul>
<li>æ˜¯å­é›†ä¸”åŒé•·åº¦ï¼šç›¸ç­‰ <code>=</code>ã€‚</li>
<li>æ˜¯å­é›†ä½†é•·åº¦ä¸åŒï¼šåŒ…å«æ–¼ âŠ‚ï¼ˆ<code>&lt;</code>ï¼‰ã€‚</li>
<li>ä¸æ˜¯å­é›†ä½†é•·åº¦ç›¸åŒï¼šä¸ç›¸äº¤ï¼ˆdisjointï¼‰ã€‚</li>
<li>ä¸æ˜¯å­é›†ä¸”é•·åº¦ä¸åŒï¼šå…ˆå‡è¨­ self æ˜¯ other çš„è¶…é›†ï¼Œå†é€é <a href="https://doc.rust-lang.org/std/option/enum.Option.html#method.filter"><code>Option::filter</code></a> éæ¿¾ï¼Œæ˜¯è¶…é›†å‰‡å›å‚³ <code>Some(Ordering::Greater)</code>ï¼Œä¸æ˜¯å‰‡å›å‚³ <code>None</code>ã€‚</li>
</ul>
</li>
</ol>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T&gt; PartialOrd for HashSet&lt;T&gt;
where
    T: Hash + Eq,
{
    fn partial_cmp(&amp;self, other: &amp;HashSet&lt;T&gt;) -&gt; Option&lt;Ordering&gt; { // 1
        let is_subset = self.is_subset(other);                      // 2
        let same_size = self.len() == other.len();
        match (is_subset, same_size) {                              // 3
            (true, true) =&gt; Some(Ordering::Equal),
            (true, false) =&gt; Some(Ordering::Less),
            (false, true) =&gt; None,
            _ =&gt; Some(Ordering::Greater).filter(|_| self.is_superset(other)),
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>å¯¦ä½œ <code>PartialEq</code>ï¼Œ<code>Eq</code> èˆ‡ <code>PartialOrd</code> å¾Œï¼Œæˆ‘å€‘çš„é›†åˆå‹åˆ¥çµ‚æ–¼èƒ½å’Œ Python çš„é›†åˆäº’åˆ¥è‹—é ­ï¼Œæœ‰æ›´é«˜å±¤æ¬¡çš„è¡¨é”æ€§ï¼</p>
<blockquote>
<p>æœ‰äººå¯èƒ½æœƒèªç‚ºï¼Œæ¯”è¼ƒé‹ç®—é‚„è¦é€é <code>partial_cmp</code> åˆ¤æ–· <code>Option</code> å¤šéº»ç…©ï¼Œäº‹å¯¦ä¸Šï¼ŒC++ 20 ä¹Ÿå¸¶ä¾†äº† <code>&lt;=&gt;</code> é‹ç®—å­ä»¥åŠ <a href="https://en.cppreference.com/w/cpp/language/operator_comparison#Three-way_comparison">three way comparison</a> è¡ç”Ÿçš„å„ç¨®å‹åˆ¥ï¼Œpartial order æˆ– parital equal å¯èªªæ˜¯æ›´ç²¾ç¢ºä¸”å¿…è¦çš„æ¯”è¼ƒé‹ç®—ï¼Œä¹Ÿæ˜¯ä¸€ç¨®è¶¨å‹¢ã€‚</p>
</blockquote>
<h2><a class="header" href="#æ•ˆèƒ½" id="æ•ˆèƒ½">æ•ˆèƒ½</a></h2>
<p>ä»¥é›œæ¹Šè¡¨ç‚ºåº•å±¤å„²å­˜å®¹å™¨çš„é›†åˆï¼Œå„æ“ä½œè¤‡é›œåº¦å¦‚ä¸‹</p>
<table><thead><tr><th>Operation</th><th>Best case</th><th>Worst case</th></tr></thead><tbody>
<tr><td>insert(v)</td><td>$O(1)$~</td><td>$O(n)$</td></tr>
<tr><td>remove(v)</td><td>$O(1)$~</td><td>$O(n)$</td></tr>
<tr><td>contains(v)</td><td>$O(1)$</td><td>$O(n)$</td></tr>
<tr><td>union</td><td>$O(n)$</td><td>$O(n)$</td></tr>
<tr><td>intersection</td><td>$O(n)$</td><td>$O(n)$</td></tr>
<tr><td>difference</td><td>$O(n)$</td><td>$O(n)$</td></tr>
<tr><td>symmetric difference</td><td>$O(n)$</td><td>$O(n)$</td></tr>
</tbody></table>
<blockquote>
<p>$n$ï¼šè³‡æ–™ç­†æ•¸ã€‚<br />
$v$ï¼šè³‡æ–™å€¼ã€‚<br />
<strong>~</strong>ï¼šå¹³æ”¤å¾Œçš„è¤‡é›œåº¦ï¼ˆamortizedï¼‰ã€‚</p>
</blockquote>
<p>æ“ä½œçš„æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦ï¼Œèˆ‡å…¶åº•å±¤å„²å­˜å®¹å™¨çš„å¯¦ä½œæœ‰é—œï¼Œæœ¬æ¬¡é›†åˆå¯¦ä½œåªæ˜¯å°é›œæ¹Šè¡¨çš„ç°¡å–®å°è£ï¼Œè©³ç´°æ¼”ç®—æ³•è¤‡é›œåº¦å¯ä»¥åƒè€ƒ <a href="../hash_map#%E6%95%88%E8%83%BD">HashMap</a>ã€‚</p>
<h2><a class="header" href="#åƒè€ƒè³‡æ–™" id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/std/collections/hash_set/struct.HashSet.html">Rust Documentation: HashSet</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#set">Python 3: Set</a></li>
<li><a href="https://en.wikipedia.org/wiki/Set_theory">Wiki: Set theory</a></li>
<li>Venn diagrams are screenshoot from Wikipedia via public domain.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../collections/hash_map/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../collections/bloom_filter/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../collections/hash_map/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../collections/bloom_filter/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        
        <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../theme/custom.js"></script>
        

        

    </body>
</html>
